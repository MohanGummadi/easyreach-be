<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <style> 
        @page {
            size: 80mm auto;
            margin: 2.5mm;
        }
        body {
            font-family: monospace;
            font-size: 12px;
            width: 75mm;
            margin: 0;
        }
        .header-flex {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        .header-flex .title {
            font-size: 18px;   /* 50% larger than 12px base */
            font-weight: bold;
            text-align: center;
        }
        .logo {
            width: 30px;
            height: 30px;
            object-fit: contain;
        }
        table { width:100%; border-collapse:collapse; }
        td { padding:2px 0; vertical-align:top; }
        .data-table {
            width: 100%;
            table-layout: fixed;
        }
        .data-table td:first-child {
            text-align: left;
            white-space: nowrap;
        }
        .data-table td:last-child {
            word-break: break-word;
            text-align: right;
        }
        .address-block {
          text-align: left;
          white-space: normal;
          word-break: break-all;
          overflow-wrap: anywhere;
          display: block;
          width: 100%;
        }
        .section-title { text-align:center; margin:4px 0; font-weight:bold; }
        hr { border:0; border-top:1px dashed #000; margin:6px 0; }
        .qr { text-align:center; margin-top:10px; }
        .footer { text-align:center; margin-top:10px; }
    </style>
</head>
<body>
<div class="copy">
    <div class="header">
        <div class="header-flex">
            <img class="logo" th:if="${logoBase64} != null" th:src="'data:image/png;base64,' + ${logoBase64}" alt="logo" />
            <div class="title">AP SAND<br/>MANAGEMENT SYSTEM</div>
        </div>
    </div>
    <div class="section-title">Consumer Copy</div>
    <hr/>
    <table class="data-table">
        <tr th:each="row : ${rows}">
            <td th:text="${row.label}" th:style="${#strings.length(row.label) > 15 ? 'width:60%' : 'width:40%'}"></td>
            <td th:text="${row.value}" th:style="${#strings.length(row.label) > 15 ? 'width:40%;text-align:right;' : 'width:60%;text-align:right;'}"></td>
        </tr>
    </table>
    <div class="address-block">Address: <span th:text="${address}"></span></div>
</div>
<hr/>
<div class="copy">
    <div class="header">
        <div class="header-flex">
            <img class="logo" th:if="${logoBase64} != null" th:src="'data:image/png;base64,' + ${logoBase64}" alt="logo" />
            <div class="title">AP SAND<br/>MANAGEMENT SYSTEM</div>
        </div>
    </div>
    <div class="section-title">Driver Copy</div>
    <hr/>
    <table class="data-table">
        <tr th:each="row : ${rows}">
            <td th:text="${row.label}" th:style="${#strings.length(row.label) > 15 ? 'width:60%' : 'width:40%'}"></td>
            <td th:text="${row.value}" th:style="${#strings.length(row.label) > 15 ? 'width:40%;text-align:right;' : 'width:60%;text-align:right;'}"></td>
        </tr>
    </table>
    <div class="address-block">Address: <span th:text="${address}"></span></div>
</div>
<div class="qr" th:if="${qrBase64} != null">
    <img th:src="'data:image/png;base64,' + ${qrBase64}" alt="qr" style="width:90px;height:90px;" />
</div>
<div class="footer" th:text="${footerLine}"></div>
</body>
</html>
